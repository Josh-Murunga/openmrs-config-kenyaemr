System.register(["@openmrs/esm-globals","@openmrs/esm-translations"],(function(e,t){var r={},n={};return{setters:[function(e){r.dispatchToastShown=e.dispatchToastShown},function(e){n.getCoreTranslation=e.getCoreTranslation}],execute:function(){e((()=>{"use strict";var e={728:e=>{e.exports=r},901:e=>{e.exports=n}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{o.S={};var e={},t={};o.I=(r,n)=>{n||(n=[]);var i=t[r];if(i||(i=t[r]={}),!(n.indexOf(i)>=0)){if(n.push(i),e[r])return e[r];o.o(o.S,r)||(o.S[r]={}),o.S[r];var a=[];return e[r]=a.length?Promise.all(a).then((()=>e[r]=1)):1}}})();var i={};return(()=>{o.r(i),o.d(i,{getCurrentImportMap:()=>p,importDynamic:()=>c,preloadImport:()=>u,slugify:()=>s});var e=o(728),t=o(901);function r(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function a(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function s(e){return e.replace(/[\/\-@]/g,"_")}function c(e){return l.apply(this,arguments)}function l(){return l=n((function(e){var t,r,n,i,c,l,d,p,f,h,m=arguments;return a(this,(function(a){switch(a.label){case 0:return t=m.length>1&&void 0!==m[1]?m[1]:"./start",n=!(null==(r=m.length>2?m[2]:void 0)?void 0:r.maxLoadingTime)||r.maxLoadingTime<=0?6e5:r.maxLoadingTime,i=void 0,[4,Promise.race([u(e,null==r?void 0:r.importMap),new Promise((function(t,r){i=setTimeout((function(){var t;r(new Error("Could not resolve requested script, ".concat(e,", within ").concat((t=n)<1e3?"".concat(t," milliseconds"):t<6e4?"".concat(Math.floor(t/1e3)," seconds"):t<36e5?"".concat(Math.floor(t/6e4)," minutes"):t<864e5?"".concat(Math.floor(t/36e5)," hours"):"".concat(Math.floor(t/864e5)," days"),".")))}),n)}))])];case 1:if(a.sent(),i&&clearTimeout(i),c=s(e),"object"!=typeof(v=l=window[c])||null===v||!("init"in v)||"function"!=typeof v.init||!("get"in v)||"function"!=typeof v.get)throw d="The global variable ".concat(c," does not refer to a federated module"),console.error(d),new Error(d);return l.init(o.S.default),[4,l.get(t)];case 2:if(p=a.sent(),"object"!=typeof(f=p())||null===f)throw h="Container for ".concat(e," did not return an ESM module as expected"),console.error(h),new Error(h);return[2,f]}var v}))})),l.apply(this,arguments)}function u(e,t){return d.apply(this,arguments)}function d(){return(d=n((function(r,n){var o,i,c,l,u,d,f,m;return a(this,(function(a){switch(a.label){case 0:if("string"!=typeof r||0===r.trim().length)throw o="Attempted to call importDynamic() without supplying a package to load",console.error(o),new Error(o);return i=s(r),window[i]?[3,7]:null==n?[3,1]:(l=n,[3,3]);case 1:return[4,p()];case 2:l=a.sent(),a.label=3;case 3:if(!(c=l).imports.hasOwnProperty(r))throw u="Could not find the package ".concat(r," defined in the current importmap"),console.error(u),new Error(u);(d=c.imports[r]).startsWith("./")&&(d=window.spaBase+d.substring(1)),f=!!window.localStorage.getItem("import-map-override:".concat(r)),a.label=4;case 4:return a.trys.push([4,6,,7]),[4,new Promise((function(e,t){!function(e,t,r){var n=document.head.querySelector('script[src="'.concat(e,'"]')),o=window[h];if(o||(o=window[h]=new Set([])),n){var i,a,s;o.has(e)?(s=function(){i&&n.removeEventListener("load",i),a&&n.removeEventListener("error",a)},i=function(){s(),t(null)},a=function(e){s(),r(e.message)},n.addEventListener("load",i),n.addEventListener("error",a)):(console.warn("Script at ".concat(e," already loaded. Not loading it again.")),t(null))}else{o.add(e);var c=document.createElement("script");c.src=e,c.type="text/javascript",c.async=!0;var l,u,d,p=setTimeout((function(){console.error("The script at ".concat(e," did not load within 5 seconds. This may indicate an issue with the imports in the script's entry-point file or with the script's bundler configuration."))}),5e3);d=function(){clearTimeout(p),o.delete(e),l&&c.removeEventListener("load",l),u&&c.removeEventListener("error",u)},l=function(){d(),t(null)},u=function(t){d();var n,o="Failed to load script from ".concat(e);console.error(o,t),r(null!==(n=t.message)&&void 0!==n?n:o)},c.addEventListener("load",l),c.addEventListener("error",u),document.head.appendChild(c)}}(d,e,t)}))];case 5:return[2,a.sent()];case 6:return m=a.sent(),f&&(0,e.dispatchToastShown)({kind:"error",title:(0,t.getCoreTranslation)("scriptLoadingFailed","Error: Script failed to load"),description:(0,t.getCoreTranslation)("scriptLoadingError","Failed to load overridden script from {{- url}}. Please check that the bundled script is available at the expected URL. Click the button below to reset all import map overrides.",{url:d}),actionButtonLabel:(0,t.getCoreTranslation)("resetOverrides","Reset overrides"),onActionButtonClick:function(){window.importMapOverrides.resetOverrides(),window.location.reload()}}),[2,Promise.reject(m)];case 7:return[2,Promise.resolve()]}}))}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=n((function(){return a(this,(function(e){return[2,window.importMapOverrides.getCurrentPageMap()]}))}))).apply(this,arguments)}var h=Symbol("__openmrs_script_loading")})(),i})())}}}));
//# sourceMappingURL=openmrs-esm-dynamic-loading.js.map