/*! For license information please see openmrs-esm-react-utils.js.LICENSE.txt */
System.register(["react","@openmrs/esm-navigation","@openmrs/esm-extensions","@openmrs/esm-globals","@openmrs/esm-utils","@openmrs/esm-feature-flags","@openmrs/esm-api","react-dom","react-i18next","swr","@openmrs/esm-context","@openmrs/esm-config","dayjs"],(function(e,t){var n={},r={},o={},i={},a={},u={},c={},l={},s={},f={},d={},p={},y={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(l,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){r.interpolateUrl=e.interpolateUrl,r.navigate=e.navigate},function(e){o.getConnectedExtensions=e.getConnectedExtensions,o.getExtensionInternalStore=e.getExtensionInternalStore,o.getExtensionStore=e.getExtensionStore,o.registerExtensionSlot=e.registerExtensionSlot,o.renderExtension=e.renderExtension},function(e){i.subscribeConnectivityChanged=e.subscribeConnectivityChanged},function(e){a.isOnline=e.isOnline,a.shallowEqual=e.shallowEqual},function(e){u.featureFlagsStore=e.featureFlagsStore},function(e){c.attachmentUrl=e.attachmentUrl,c.defaultVisitCustomRepresentation=e.defaultVisitCustomRepresentation,c.fetchCurrentPatient=e.fetchCurrentPatient,c.getCurrentUser=e.getCurrentUser,c.getLocations=e.getLocations,c.getSessionStore=e.getSessionStore,c.getVisitStore=e.getVisitStore,c.getVisitTypes=e.getVisitTypes,c.makeUrl=e.makeUrl,c.openmrsFetch=e.openmrsFetch,c.restBaseUrl=e.restBaseUrl,c.userHasAccess=e.userHasAccess},function(e){Object.keys(e).forEach((function(t){l[t]=e[t]}))},function(e){s.I18nextProvider=e.I18nextProvider},function(e){f.SWRConfig=e.SWRConfig,f.default=e.default},function(e){d.registerContext=e.registerContext,d.subscribeToContext=e.subscribeToContext,d.unregisterContext=e.unregisterContext,d.updateContext=e.updateContext},function(e){p.getConfigStore=e.getConfigStore,p.getExtensionConfigFromStore=e.getExtensionConfigFromStore,p.getExtensionsConfigStore=e.getExtensionsConfigStore},function(e){y.default=e.default}],execute:function(){e((()=>{var e={332:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},645:(e,t,n)=>{"use strict";var r=n(493);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},385:()=>{System.register([],(function(e,t){return{execute:function(){e(function(){"use strict";var e=function(e,t){var n=c[e];if(n)return n.active?console.error("Cannot override an existing store. Make sure that stores are only created once."):n.value.setState(t,!0),n.active=!0,n.value;var r=u()((function(){return t}));return c[e]={value:r,active:!0},r},t=function(e,t){var n=c[e];return n?(n.active?console.error("Cannot override an existing store. Make sure that stores are only created once."):n.value=t,n.active=!0,n.value):(c[e]={value:t,active:!0},t)},n=function(e,t){var n=c[e];if(!n){var r=u()((function(){return null!=t?t:{}}));return c[e]={value:r,active:!1},r}return n.value},r=function(e,t,n){var r=t(e.getState());return e.subscribe((function(e){var o=t(e);o!==r&&(r=o,n(o))}))},o={d:function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};o.r(i),o.d(i,{createGlobalStore:function(){return e},getGlobalStore:function(){return n},registerGlobalStore:function(){return t},subscribeTo:function(){return r}});var a=function(e){var t,n=new Set,r=function(e,r){var o="function"==typeof e?e(t):e;if(!Object.is(o,t)){var i=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach((function(e){return e(t,i)}))}},o=function(){return t},i={setState:r,getState:o,getInitialState:function(){return a},subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},u=function(e){return e?a(e):a},c={};return setTimeout((function(){"development"===window.spaEnv&&(window.stores=c)}),1e3),i}())}}}))},173:(e,t,n)=>{"use strict";var r=n(954),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,u=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return u((function(){o.value=n,o.getSnapshot=t,l(o)&&s({inst:o})}),[e,n,t]),a((function(){return l(o)&&s({inst:o}),e((function(){l(o)&&s({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:s},374:(e,t,n)=>{"use strict";e.exports=n(173)},766:e=>{"use strict";e.exports=c},824:e=>{"use strict";e.exports=p},743:e=>{"use strict";e.exports=d},45:e=>{"use strict";e.exports=o},708:e=>{"use strict";e.exports=u},728:e=>{"use strict";e.exports=i},513:e=>{"use strict";e.exports=r},618:e=>{"use strict";e.exports=a},688:e=>{"use strict";e.exports=y},954:e=>{"use strict";e.exports=n},493:e=>{"use strict";e.exports=l},281:e=>{"use strict";e.exports=s},725:e=>{"use strict";e.exports=f}},t={};function v(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,v),o.exports}v.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return v.d(t,{a:t}),t},v.d=(e,t)=>{for(var n in t)v.o(t,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},v.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};return(()=>{"use strict";v.r(m),v.d(m,{ComponentContext:()=>t,ConfigurableLink:()=>o,Extension:()=>l,ExtensionSlot:()=>L,OpenmrsAppContext:()=>he,UserHasAccess:()=>B,createUseStore:()=>_,getAsyncExtensionLifecycle:()=>me,getAsyncLifecycle:()=>ye,getFhirServerPaginationHandlers:()=>ko,getLifecycle:()=>pe,getSyncLifecycle:()=>ve,isDesktop:()=>Zn,openmrsComponentDecorator:()=>de,useAbortController:()=>we,useAppContext:()=>je,useAssignedExtensionIds:()=>Cn,useAssignedExtensions:()=>A,useAttachments:()=>An,useBodyScrollLock:()=>Rn,useConfig:()=>Fn,useConnectedExtensions:()=>T,useConnectivity:()=>p,useDebounce:()=>Bn,useDefineAppContext:()=>ge,useExtensionInternalStore:()=>zn,useExtensionSlot:()=>M,useExtensionSlotMeta:()=>$n,useExtensionStore:()=>C,useFeatureFlag:()=>Wn,useFhirFetchAll:()=>qo,useFhirInfinite:()=>zo,useFhirPagination:()=>Io,useForceUpdate:()=>qn,useLayoutType:()=>Yn,useLocations:()=>Xn,useOnClickOutside:()=>er,useOpenmrsFetchAll:()=>Wo,useOpenmrsInfinite:()=>Vo,useOpenmrsPagination:()=>Po,useOpenmrsSWR:()=>nr,usePagination:()=>jr,usePatient:()=>fr,usePrimaryIdentifierCode:()=>Er,useRenderableExtensions:()=>dr,useSession:()=>yr,useStore:()=>x,useStoreWithActions:()=>P,useVisit:()=>gr,useVisitTypes:()=>wr});var e=v(954),t=e.default.createContext({moduleName:"",featureName:""}),n=v(513);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var o=t.to,i=t.templateParams,a=t.onBeforeNavigate,u=t.children,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["to","templateParams","onBeforeNavigate","children"]);return(0,e.useEffect)((function(){c.href&&console.warn("ConfigurableLink does not support the href prop. Use the 'to' prop instead. The provided href value is '".concat(c.href,"'")),c.onClick&&console.warn("ConfigurableLink does not support the onClick prop. Use the 'onBeforeNavigate' prop instead. The 'to' prop of the offending link is ".concat(o))}),[]),e.default.createElement("a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}({onClick:function(e){return function(e,t,r,o){0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),null==o||o(e),(0,n.navigate)({to:t,templateParams:r})),0===e.button&&(e.ctrlKey||e.metaKey)&&(null==o||o(e)),0===e.button&&e.shiftKey&&(null==o||o(e)),1===e.button&&(null==o||o(e))}(e,o,i,a)},href:(0,n.interpolateUrl)(o,i)},c),u)}var i=v(45);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}var l=function(n){var r,o,u=n.state,l=n.children,s=n.wrap,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["state","children","wrap"]),d=(r=(0,e.useState)(),o=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(r,o)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=d[0],y=d[1],v=(0,e.useContext)(t).extension,m=(0,e.useRef)(null),b=(0,e.useRef)(Promise.resolve()),g=(0,e.useRef)(!1);(0,e.useEffect)((function(){s&&console.warn("'wrap' prop of Extension is being used ".concat((null==v?void 0:v.extensionId)?"by ".concat(v.extensionId," in ").concat(v.extensionSlotName):"",". This will be removed in a future release."))}),[]);var h=(0,e.useCallback)((function(e){y(e)}),[y]);(0,e.useEffect)((function(){if(null!=p&&(null==v?void 0:v.extensionSlotName)&&v.extensionSlotModuleName&&v.extensionSlotModuleName&&!m.current&&!g.current)return g.current=!0,(0,i.renderExtension)(p,v.extensionSlotName,v.extensionSlotModuleName,v.extensionId,void 0,u).then((function(e){m.current=e,g.current=!1})),function(){if(m&&m.current)switch(m.current.getStatus()){case"MOUNTING":m.current.mountPromise.then((function(){var e;"MOUNTED"===(null===(e=m.current)||void 0===e?void 0:e.getStatus())&&m.current.unmount()}));break;case"MOUNTED":m.current.unmount();break;case"UPDATING":b.current&&b.current.then((function(){var e;"MOUNTED"===(null===(e=m.current)||void 0===e?void 0:e.getStatus())&&m.current.unmount()}))}}}),[null==v?void 0:v.extensionSlotName,null==v?void 0:v.extensionId,null==v?void 0:v.extensionSlotModuleName,p]),(0,e.useEffect)((function(){m.current&&m.current.update&&"UNMOUNTING"!==m.current.getStatus()&&Promise.all([m.current.mountPromise,b.current]).then((function(){var e;"MOUNTED"===(null==m||null===(e=m.current)||void 0===e?void 0:e.getStatus())&&m.current.update&&(b.current=m.current.update(c({},u)).catch((function(e){var t,n,r;if(n=e,!(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)||!e.message.includes("minified message #32")||"MOUNTED"===(null===(t=m.current)||void 0===t?void 0:t.getStatus()))throw e})))}))}),[u]);var w=e.default.createElement("div",c({ref:h,"data-extension-id":null==v?void 0:v.extensionId,style:{position:"relative"}},f));return"function"!=typeof l||e.default.isValidElement(l)?v&&s?s(w,v):w:e.default.createElement(e.default.Fragment,null,l(w,v))},s=v(728),f=v(618);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){var t,n,r=(t=(0,e.useState)((0,f.isOnline)()),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return(0,e.useEffect)((function(){return(0,s.subscribeConnectivityChanged)((function(e){var t=e.online;return i(t)}))}),[]),o}var y=v(385);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function j(e,t){var n=function(n){r[n]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];e.setState((function(e){var r,i=[e].concat(O(o));return(r=t)[n].apply(r,O(i))}))}};"function"==typeof t&&(t=t(e));var r={};for(var o in t)n(o);return r}var E=function(e){return e};function x(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,r=arguments.length>2?arguments[2]:void 0,o=w((0,e.useState)((function(){return n(t.getState())})),2),i=o[0],a=o[1];return(0,e.useEffect)((function(){return(0,y.subscribeTo)(t,n,a)}),[t,n]),h({},i,(0,e.useMemo)((function(){return r?j(t,r):{}}),[t,r]))}function P(e,t){return x(e,E,t)}function _(t){return function(n){var r=w((0,e.useState)(t.getState()),2),o=r[0],i=r[1];return(0,e.useEffect)((function(){return t.subscribe((function(e){return i(e)}))}),[]),h({},o,(0,e.useMemo)((function(){return n?j(t,n):{}}),[n]))}}var C=_((0,i.getExtensionStore)());function A(t){var n=C().slots;return(0,e.useMemo)((function(){var e,r;return null!==(r=null===(e=n[t])||void 0===e?void 0:e.assignedExtensions)&&void 0!==r?r:[]}),[n,t])}var R=v(708);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t){var n=p(),r=A(t),o=x(R.featureFlagsStore),a=(0,e.useMemo)((function(){return Object.entries(o.flags).filter((function(e){return k(e,2)[1].enabled})).map((function(e){return k(e,1)[0]}))}),[o.flags]);return(0,e.useMemo)((function(){return(0,i.getConnectedExtensions)(r,n,a)}),[r,n,a])}function M(n){var r=(0,e.useContext)(t).moduleName;if(!r)throw Error("ComponentContext has not been provided. This should come from @openmrs/esm-react-utils.");return(0,e.useEffect)((function(){(0,i.registerExtensionSlot)(r,n)}),[]),{extensions:T(n),extensionSlotName:n,extensionSlotModuleName:r}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}function D(e){return e}function L(n){var r=n.name,o=n.extensionSlotName,i=n.select,a=void 0===i?D:i,u=n.children,c=n.state,s=n.style,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["name","extensionSlotName","select","children","state","style"]);if(u&&c)throw new Error("Both children and state have been provided. If children are provided, the state must be passed as a prop to the `Extension` component.");var d,p,y,v,m=null!=r?r:o,b=(0,e.useRef)(null),g=M(m),h=g.extensions,w=g.extensionSlotModuleName,O=(0,e.useMemo)((function(){return a(h)}),[a,h]),S=(0,e.useMemo)((function(){if("function"==typeof u&&!e.default.isValidElement(u))return O.map((function(e){return u(e)}))}),[u,O]);return e.default.createElement("div",U({ref:b,"data-extension-slot-name":m,"data-extension-slot-module-name":w,style:(y=U({},s),v={position:"relative"},v=null!=v?v:{},Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(v)).forEach((function(e){Object.defineProperty(y,e,Object.getOwnPropertyDescriptor(v,e))})),y)},f),m&&O.map((function(n,r){return e.default.createElement(t.Provider,{key:n.id,value:{moduleName:w,featureName:"",extension:{extensionId:n.id,extensionSlotName:m,extensionSlotModuleName:w}}},null!==(p=null!==(d=null==S?void 0:S[r])&&void 0!==d?d:"function"!=typeof u?u:null)&&void 0!==p?p:e.default.createElement(l,{state:c}))})))}var F=v(766);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=function(t){var n,r,o=t.privilege,i=t.fallback,a=t.children,u=(n=(0,e.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];return(0,e.useEffect)((function(){var e=(0,F.getCurrentUser)({includeAuthStatus:!1}).subscribe(l);return function(){return e.unsubscribe()}}),[]),c&&(0,F.userHasAccess)(o,c)?e.default.createElement(e.default.Fragment,null,a):i?e.default.createElement(e.default.Fragment,null,i):null},z=v(645);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var n;if("function"!=typeof(n=t.domElement?function(){return t.domElement}:t.domElementGetter?t.domElementGetter:e.domElementGetter?e.domElementGetter:function(e){var t=e.appName||e.name;if(!t)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var n="single-spa-application:".concat(t);return function(){var e=document.getElementById(n);return e||((e=document.createElement("div")).id=n,document.body.appendChild(e)),e}}(t)))throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(t.name,"'. Expected a function, received ").concat(H(n)));return function(){var e=n(t);if(!(e instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(t.name,"'. Expected HTMLElement, received ").concat(H(e)));return e}}var Y=null;try{Y=require("react").createContext()}catch($){}var J={React:null,ReactDOM:null,ReactDOMClient:null,rootComponent:null,loadRootComponent:null,errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{},unmountResolves:{}};function Z(e,t){return e.rootComponent?Promise.resolve():e.loadRootComponent(t).then((function(t){e.rootComponent=t}))}function Q(e,t){return new Promise((function(n,r){e.suppressComponentDidCatchWarning||!function(e){if(!(e&&"string"==typeof e.version&&e.version.indexOf(".")>=0))return!1;var t=e.version.slice(0,e.version.indexOf("."));try{return Number(t)>=16}catch(e){return!1}}(e.React)||e.errorBoundary||e.errorBoundaryClass||(e.rootComponent.prototype?e.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var o=re(e,t,(function(){n(this)})),i=K(e,t)(),a=function(e){var t=e.renderType,n=e.elementToRender,r=e.domElement,o=e.reactDom[t];if("function"!=typeof o)throw new Error('renderType "'.concat(t,'" did not return a function.'));switch(t){case"createRoot":case"unstable_createRoot":case"createBlockingRoot":case"unstable_createBlockingRoot":var i=o(r);return i.render(n),i;case"hydrateRoot":return o(r,n);default:return o(n,r),null}}({elementToRender:o,domElement:i,reactDom:te(e),renderType:ne(e)});e.domElements[t.name]=i,e.renderResults[t.name]=a}))}function X(e,t){return new Promise((function(n){e.unmountResolves[t.name]=n;var r=e.renderResults[t.name];r&&r.unmount?r.unmount():te(e).unmountComponentAtNode(e.domElements[t.name]),delete e.domElements[t.name],delete e.renderResults[t.name]}))}function ee(e,t){return new Promise((function(n){e.updateResolves[t.name]||(e.updateResolves[t.name]=[]),e.updateResolves[t.name].push(n);var r=re(e,t,null),o=e.renderResults[t.name];if(o&&o.render)o.render(r);else{var i=K(e,t)();te(e).render(r,i)}}))}function te(e){return e.ReactDOMClient||e.ReactDOM}function ne(e){return"function"==typeof e.renderType?e.renderType():e.renderType}function re(e,t,n){var r=e.React.createElement(e.rootComponent,t),o=Y?e.React.createElement(Y.Provider,{value:t},r):r;return(e.errorBoundary||t.errorBoundary||e.errorBoundaryClass||t.errorBoundaryClass)&&(e.errorBoundaryClass=e.errorBoundaryClass||t.errorBoundaryClass||function(e,t){function n(t){e.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},n.displayName="SingleSpaReactErrorBoundary(".concat(t.name,")")}return n.prototype=Object.create(e.React.Component.prototype),n.prototype.render=function(){return this.state.caughtError?(e.errorBoundary||t.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},n.prototype.componentDidCatch=function(e,t){this.setState({caughtError:e,caughtErrorInfo:t})},n}(e,t),o=e.React.createElement(e.errorBoundaryClass,t,o)),e.React.createElement(e.SingleSpaRoot,W(W({},t),{},{mountFinished:n,updateFinished:function(){e.updateResolves[t.name]&&(e.updateResolves[t.name].forEach((function(e){return e()})),delete e.updateResolves[t.name])},unmountFinished:function(){e.unmountResolves[t.name]&&(e.unmountResolves[t.name](),delete e.unmountResolves[t.name])}}),o)}var oe=v(281),ie=v(725);function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function ce(e,t){return ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}(this,n)}}var se={strictMode:!0,throwErrorsToConsole:!0,disableTranslations:!1},fe={errorRetryCount:3,fetcher:F.openmrsFetch,focusThrottleInterval:3e4};function de(n){if("object"!=typeof n||"string"!=typeof n.featureName||"string"!=typeof n.moduleName)throw new Error("Invalid options");var r=Object.assign({},se,n);return function(n){var o,i,a,u;return i=o=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(c,o);var i,a,u=le(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).state={caughtError:null,caughtErrorInfo:null,config:{moduleName:r.moduleName,featureName:r.featureName,extension:e._extensionContext}},t}return i=c,(a=[{key:"componentDidCatch",value:function(e,t){t&&t.componentStack&&(e.extra=Object.assign(e.extra||{},{componentStack:t.componentStack})),r.throwErrorsToConsole&&setTimeout((function(){throw e})),this.setState({caughtError:e,caughtErrorInfo:t})}},{key:"render",value:function(){if(this.state.caughtError)return e.default.createElement("div",null,"An error has occurred. Please try reloading the page.");var o=e.default.createElement(e.Suspense,{fallback:null},e.default.createElement(ie.SWRConfig,{value:fe},e.default.createElement(t.Provider,{value:this.state.config},r.disableTranslations?e.default.createElement(n,this.props):e.default.createElement(oe.I18nextProvider,{i18n:window.i18next,defaultNS:this.props._extensionContext?"".concat(r.moduleName,"___").concat(this.props._extensionContext.extensionSlotName,"___").concat(this.props._extensionContext.extensionId):r.moduleName},e.default.createElement(n,this.props)))));return r.strictMode||!e.default.StrictMode?o:e.default.createElement(e.default.StrictMode,null,o)}}])&&ae(i.prototype,a),c}(e.default.Component),a="displayName",u="OpenmrsReactComponent(".concat(r.featureName,")"),a in i?Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[a]=u,o}}function pe(t,n){return function(e){if("object"!==G(e))throw new Error("single-spa-react requires a configuration object");var t,n=W(W({},J),e);if(!n.React)throw new Error("single-spa-react must be passed opts.React");if(!n.ReactDOM&&!n.ReactDOMClient)throw new Error("single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient");if(n.renderType||(null!==(t=n.ReactDOMClient)&&void 0!==t&&t.createRoot?n.renderType="createRoot":n.renderType="render"),!n.rootComponent&&!n.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(n.errorBoundary&&"function"!=typeof n.errorBoundary)throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!Y&&n.React.createContext&&(Y=n.React.createContext()),n.SingleSpaRoot=function(e){function t(e){t.displayName="SingleSpaRoot(".concat(e.name,")")}return t.prototype=Object.create(e.React.Component.prototype),t.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},t.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},t.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},t}(n);var r={bootstrap:Z.bind(null,n),mount:Q.bind(null,n),unmount:X.bind(null,n)};return n.parcelCanUpdate&&(r.update=ee.bind(null,n)),r}({React:e.default,ReactDOMClient:z,rootComponent:de(n)(t)})}function ye(e,t){return function(){return e().then((function(e){return pe(e.default,t)}))}}function ve(e,t){return function(){return Promise.resolve(pe(e,t))}}var me=ye,be=v(743);function ge(t,n){var r=(0,e.useRef)(null!=n?n:{}),o=(0,e.useRef)((function(e){return(0,be.updateContext)(t,e)}));return(0,e.useEffect)((function(){return(0,be.registerContext)(t,null!=n?n:{}),function(){(0,be.unregisterContext)(t)}}),[t]),(0,e.useEffect)((function(){var e=null!=n?n:{};(0,f.shallowEqual)(r.current,e)||((0,be.updateContext)(t,(function(){return e})),r.current=e)}),[n]),o.current}function he(e){return ge(e.namespace,e.value),null}function we(){var t=(0,e.useRef)();return t.current&&!t.current.signal.aborted||(t.current=new AbortController),(0,e.useEffect)((function(){var e=t.current;return function(){return null==e?void 0:e.abort()}}),[]),t.current}const Oe=we;function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return null!=e?e:{}},i=(n=(0,e.useState)(),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1];return(0,e.useEffect)((function(){if(null==t||""===t.replace(" ",""))throw new Error('The namespace supplied to useAppContext must be a non-empty string, but was "'.concat(t,'".'))}),[t]),(0,e.useEffect)((function(){return(0,be.subscribeToContext)(t,(function(e){if(void 0!==e){var t=o?o(e):null!=e?e:{};(0,f.shallowEqual)(a,t)||u(t)}}))}),[]),a}const Ee=function(e,t){return e===t||e!=e&&t!=t},xe=function(e,t){for(var n=e.length;n--;)if(Ee(e[n][0],t))return n;return-1};var Pe=Array.prototype.splice;function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_e.prototype.clear=function(){this.__data__=[],this.size=0},_e.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0||(n==t.length-1?t.pop():Pe.call(t,n,1),--this.size,0))},_e.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},_e.prototype.has=function(e){return xe(this.__data__,e)>-1},_e.prototype.set=function(e,t){var n=this.__data__,r=xe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Ce=_e,Ae="object"==typeof global&&global&&global.Object===Object&&global;var Re="object"==typeof self&&self&&self.Object===Object&&self;const Ie=Ae||Re||Function("return this")(),ke=Ie.Symbol;var Te=Object.prototype,Me=Te.hasOwnProperty,Ne=Te.toString,Ue=ke?ke.toStringTag:void 0;var De=Object.prototype.toString;var Le=ke?ke.toStringTag:void 0;const Fe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Le&&Le in Object(e)?function(e){var t=Me.call(e,Ue),n=e[Ue];try{e[Ue]=void 0;var r=!0}catch(e){}var o=Ne.call(e);return r&&(t?e[Ue]=n:delete e[Ue]),o}(e):function(e){return De.call(e)}(e)},Ve=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Be=function(e){if(!Ve(e))return!1;var t=Fe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ze=Ie["__core-js_shared__"];var $e,We=($e=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||""))?"Symbol(src)_1."+$e:"";var Ge=Function.prototype.toString;const qe=function(e){if(null!=e){try{return Ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var He=/^\[object .+?Constructor\]$/,Ke=Function.prototype,Ye=Object.prototype,Je=Ke.toString,Ze=Ye.hasOwnProperty,Qe=RegExp("^"+Je.call(Ze).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Xe=function(e){return!(!Ve(e)||(t=e,We&&We in t))&&(Be(e)?Qe:He).test(qe(e));var t},et=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Xe(n)?n:void 0},tt=et(Ie,"Map"),nt=et(Object,"create");var rt=Object.prototype.hasOwnProperty;var ot=Object.prototype.hasOwnProperty;function it(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}it.prototype.clear=function(){this.__data__=nt?nt(null):{},this.size=0},it.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},it.prototype.get=function(e){var t=this.__data__;if(nt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return rt.call(t,e)?t[e]:void 0},it.prototype.has=function(e){var t=this.__data__;return nt?void 0!==t[e]:ot.call(t,e)},it.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nt&&void 0===t?"__lodash_hash_undefined__":t,this};const at=it,ut=function(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function ct(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ct.prototype.clear=function(){this.size=0,this.__data__={hash:new at,map:new(tt||Ce),string:new at}},ct.prototype.delete=function(e){var t=ut(this,e).delete(e);return this.size-=t?1:0,t},ct.prototype.get=function(e){return ut(this,e).get(e)},ct.prototype.has=function(e){return ut(this,e).has(e)},ct.prototype.set=function(e,t){var n=ut(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const lt=ct;function st(e){var t=this.__data__=new Ce(e);this.size=t.size}st.prototype.clear=function(){this.__data__=new Ce,this.size=0},st.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},st.prototype.get=function(e){return this.__data__.get(e)},st.prototype.has=function(e){return this.__data__.has(e)},st.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ce){var r=n.__data__;if(!tt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new lt(r)}return n.set(e,t),this.size=n.size,this};const ft=st;function dt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new lt;++t<n;)this.add(e[t])}dt.prototype.add=dt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},dt.prototype.has=function(e){return this.__data__.has(e)};const pt=dt,yt=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},vt=function(e,t){return e.has(t)},mt=function(e,t,n,r,o,i){var a=1&n,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=i.get(e),s=i.get(t);if(l&&s)return l==t&&s==e;var f=-1,d=!0,p=2&n?new pt:void 0;for(i.set(e,t),i.set(t,e);++f<u;){var y=e[f],v=t[f];if(r)var m=a?r(v,y,f,t,e,i):r(y,v,f,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!yt(t,(function(e,t){if(!vt(p,t)&&(y===e||o(y,e,n,r,i)))return p.push(t)}))){d=!1;break}}else if(y!==v&&!o(y,v,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},bt=Ie.Uint8Array,gt=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},ht=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var wt=ke?ke.prototype:void 0,Ot=wt?wt.valueOf:void 0;const St=Array.isArray;var jt=Object.prototype.propertyIsEnumerable,Et=Object.getOwnPropertySymbols;const xt=Et?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(Et(e),(function(t){return jt.call(e,t)})))}:function(){return[]},Pt=function(e){return null!=e&&"object"==typeof e},_t=function(e){return Pt(e)&&"[object Arguments]"==Fe(e)};var Ct=Object.prototype,At=Ct.hasOwnProperty,Rt=Ct.propertyIsEnumerable,It=_t(function(){return arguments}())?_t:function(e){return Pt(e)&&At.call(e,"callee")&&!Rt.call(e,"callee")};const kt=It;var Tt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mt=Tt&&"object"==typeof module&&module&&!module.nodeType&&module,Nt=Mt&&Mt.exports===Tt?Ie.Buffer:void 0;const Ut=(Nt?Nt.isBuffer:void 0)||function(){return!1};var Dt=/^(?:0|[1-9]\d*)$/;const Lt=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Dt.test(e))&&e>-1&&e%1==0&&e<t},Ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Vt={};Vt["[object Float32Array]"]=Vt["[object Float64Array]"]=Vt["[object Int8Array]"]=Vt["[object Int16Array]"]=Vt["[object Int32Array]"]=Vt["[object Uint8Array]"]=Vt["[object Uint8ClampedArray]"]=Vt["[object Uint16Array]"]=Vt["[object Uint32Array]"]=!0,Vt["[object Arguments]"]=Vt["[object Array]"]=Vt["[object ArrayBuffer]"]=Vt["[object Boolean]"]=Vt["[object DataView]"]=Vt["[object Date]"]=Vt["[object Error]"]=Vt["[object Function]"]=Vt["[object Map]"]=Vt["[object Number]"]=Vt["[object Object]"]=Vt["[object RegExp]"]=Vt["[object Set]"]=Vt["[object String]"]=Vt["[object WeakMap]"]=!1;var Bt="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=Bt&&"object"==typeof module&&module&&!module.nodeType&&module,$t=zt&&zt.exports===Bt&&Ae.process,Wt=function(){try{return zt&&zt.require&&zt.require("util").types||$t&&$t.binding&&$t.binding("util")}catch(e){}}(),Gt=Wt&&Wt.isTypedArray;const qt=Gt?(Ht=Gt,function(e){return Ht(e)}):function(e){return Pt(e)&&Ft(e.length)&&!!Vt[Fe(e)]};var Ht,Kt=Object.prototype.hasOwnProperty;const Yt=function(e,t){var n=St(e),r=!n&&kt(e),o=!n&&!r&&Ut(e),i=!n&&!r&&!o&&qt(e),a=n||r||o||i,u=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=u.length;for(var l in e)!t&&!Kt.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Lt(l,c))||u.push(l);return u};var Jt=Object.prototype;const Zt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var Qt=Object.prototype.hasOwnProperty;const Xt=function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Jt))return Zt(e);var t,n,r=[];for(var o in Object(e))Qt.call(e,o)&&"constructor"!=o&&r.push(o);return r},en=function(e){return null!=(t=e)&&Ft(t.length)&&!Be(t)?Yt(e):Xt(e);var t},tn=function(e){return function(e,t,n){var r=t(e);return St(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,en,xt)};var nn=Object.prototype.hasOwnProperty;const rn=et(Ie,"DataView"),on=et(Ie,"Promise"),an=et(Ie,"Set"),un=et(Ie,"WeakMap");var cn="[object Map]",ln="[object Promise]",sn="[object Set]",fn="[object WeakMap]",dn="[object DataView]",pn=qe(rn),yn=qe(tt),vn=qe(on),mn=qe(an),bn=qe(un),gn=Fe;(rn&&gn(new rn(new ArrayBuffer(1)))!=dn||tt&&gn(new tt)!=cn||on&&gn(on.resolve())!=ln||an&&gn(new an)!=sn||un&&gn(new un)!=fn)&&(gn=function(e){var t=Fe(e),n="[object Object]"==t?e.constructor:void 0,r=n?qe(n):"";if(r)switch(r){case pn:return dn;case yn:return cn;case vn:return ln;case mn:return sn;case bn:return fn}return t});const hn=gn;var wn="[object Arguments]",On="[object Array]",Sn="[object Object]",jn=Object.prototype.hasOwnProperty;const En=function(e,t,n,r,o,i){var a=St(e),u=St(t),c=a?On:hn(e),l=u?On:hn(t),s=(c=c==wn?Sn:c)==Sn,f=(l=l==wn?Sn:l)==Sn,d=c==l;if(d&&Ut(e)){if(!Ut(t))return!1;a=!0,s=!1}if(d&&!s)return i||(i=new ft),a||qt(e)?mt(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new bt(e),new bt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ee(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=gt;case"[object Set]":var c=1&r;if(u||(u=ht),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var s=mt(u(e),u(t),r,o,i,a);return a.delete(e),s;case"[object Symbol]":if(Ot)return Ot.call(e)==Ot.call(t)}return!1}(e,t,c,n,r,o,i);if(!(1&n)){var p=s&&jn.call(e,"__wrapped__"),y=f&&jn.call(t,"__wrapped__");if(p||y){var v=p?e.value():e,m=y?t.value():t;return i||(i=new ft),o(v,m,n,r,i)}}return!!d&&(i||(i=new ft),function(e,t,n,r,o,i){var a=1&n,u=tn(e),c=u.length;if(c!=tn(t).length&&!a)return!1;for(var l=c;l--;){var s=u[l];if(!(a?s in t:nn.call(t,s)))return!1}var f=i.get(e),d=i.get(t);if(f&&d)return f==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);for(var y=a;++l<c;){var v=e[s=u[l]],m=t[s];if(r)var b=a?r(m,v,s,t,e,i):r(v,m,s,e,t,i);if(!(void 0===b?v===m||o(v,m,n,r,i):b)){p=!1;break}y||(y="constructor"==s)}if(p&&!y){var g=e.constructor,h=t.constructor;g==h||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof h&&h instanceof h||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))},xn=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Pt(t)&&!Pt(n)?t!=t&&n!=n:En(t,n,r,o,e,i))},Pn=function(e,t){return xn(e,t)};function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(t){var n,r,o=(n=(0,e.useState)([]),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],u=o[1];return(0,e.useEffect)((function(){return(0,i.getExtensionStore)().subscribe((function(e){var n,r,o=null!==(r=null===(n=e.slots[t])||void 0===n?void 0:n.assignedExtensions.map((function(e){return e.id})))&&void 0!==r?r:[];Pn(o,a)||u(o)}))}),[]),a}function An(t,n){var r,o=(0,ie.default)("".concat(F.attachmentUrl,"?patient=").concat(t,"&includeEncounterless=").concat(n),F.openmrsFetch),i=o.data,a=o.error,u=o.mutate,c=o.isLoading,l=o.isValidating;return(0,e.useMemo)((function(){return{isLoading:c,data:null!==(r=null==i?void 0:i.data.results)&&void 0!==r?r:[],error:a,mutate:u,isValidating:l}}),[i,a,c,l,u])}function Rn(t){(0,e.useEffect)((function(){if(t){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}}),[t])}var In=v(824);function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Tn(e,t,n[t])}))}return e}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Un={},Dn='No ComponentContext has been provided. This should come from "openmrsComponentDecorator".\nUsually this is already applied when using "getAsyncLifecycle" or "getSyncLifecycle".';function Ln(t){var n=(0,e.useMemo)(In.getExtensionsConfigStore,[]),r=function(t,n){var r=Nn((0,e.useState)(function(e,t){return t?function(){var n=e.getState(),r=(0,In.getExtensionConfigFromStore)(n,t.extensionSlotName,t.extensionId);if(r.loaded&&r.config)return r.config}:null}(t,n)),2),o=r[0],i=r[1];return(0,e.useEffect)((function(){if(n)return t.subscribe((function(e){var t=(0,In.getExtensionConfigFromStore)(e,n.extensionSlotName,n.extensionId);t.loaded&&t.config&&!Pn(t.config,o)&&i(t.config)}))}),[t,n,o]),o}(n,t);if(!r&&t){var o="".concat(t.extensionSlotName,"-").concat(t.extensionId);throw!Un[o]&&n&&(Un[o]=function(e,t){return new Promise((function(n){var r=e.subscribe((function(e){var o=(0,In.getExtensionConfigFromStore)(e,t.extensionSlotName,t.extensionId);o.loaded&&o.config&&(n(o.config),r())}))}))}(n,t)),Un[o]}return r||{}}function Fn(n){var r,o=(0,e.useContext)(t),i=o.moduleName,a=o.extension,u=null!==(r=null==n?void 0:n.externalModuleName)&&void 0!==r?r:i;if(!u&&!a)throw Error(Dn);var c=function(t){var n=(0,e.useMemo)((function(){return(0,In.getConfigStore)(t)}),[t]),r=t,o=function(t){var n=Nn((0,e.useState)(function(e){return function(){var t=e.getState();return t.loaded&&t.config?t.config:null}}(t)),2),r=n[0],o=n[1];return(0,e.useEffect)((function(){return null==t?void 0:t.subscribe((function(e){e.loaded&&e.config&&o(e.config)}))}),[t]),r}(n);if(!o)throw Un[r]||(Un[r]=function(e){return new Promise((function(t){var n=e.subscribe((function(e){e.loaded&&e.config&&(t(e.config),n())}))}))}(n)),Un[r];return o}(u),l=Ln(a);return(0,e.useMemo)((function(){return(null==n?void 0:n.externalModuleName)&&u===n.externalModuleName?Mn({},c):Mn({},c,l)}),[u,null==n?void 0:n.externalModuleName,c,l])}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=(n=(0,e.useState)(t),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1];return(0,e.useEffect)((function(){var e=setTimeout((function(){u(t)}),o);return function(){clearTimeout(e)}}),[t,o]),a}var zn=_((0,i.getExtensionInternalStore)());function $n(t){var n=T(t);return(0,e.useMemo)((function(){return Object.fromEntries(n.map((function(e){return[e.name,e.meta]})))}),[n])}function Wn(t){var n,r=x(R.featureFlagsStore).flags;return(0,e.useEffect)((function(){r[t]||console.error('useFeatureFlag: Attempted to get value of non-existent flag "'.concat(t,'". Did you forget to call registerFeatureFlag?'))}),[r[t]]),null===(n=r[t])||void 0===n?void 0:n.enabled}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qn(){var t,n,r=(t=(0,e.useState)(0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return(0,e.useCallback)((function(){r((function(e){return e+1}))}),[])}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(){var e="tablet";return document.body.classList.forEach((function(t){switch(t){case"omrs-breakpoint-lt-tablet":e="phone";break;case"omrs-breakpoint-gt-small-desktop":e="large-desktop";break;case"omrs-breakpoint-gt-tablet":e="small-desktop"}})),e}function Yn(){var t,n,r=(t=(0,e.useState)(Kn),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return(0,e.useEffect)((function(){var e=function(){i(Kn())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),o}var Jn,Zn=function(e){return"small-desktop"===e||"large-desktop"===e};function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(t=(0,e.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(0,e.useEffect)((function(){var e=(0,F.getLocations)(r).subscribe((function(e){a(e)}),(function(e){console.error(e)}));return function(){return e.unsubscribe()}}),[]),i}function er(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,e.useRef)(null);return(0,e.useEffect)((function(){var e=function(e){n&&r.current&&!r.current.contains(e.target)&&t(e)};return window.addEventListener("mousedown",e),window.addEventListener("touchstart",e),function(){window.removeEventListener("mousedown",e),window.removeEventListener("touchstart",e)}}),[t,n]),r}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.abortController,a=o.fetchInit,u=o.url,c=o.swrConfig,l=Oe(),s=(0,e.useMemo)((function(){return null!==(r=null!==(n=null==a?void 0:a.signal)&&void 0!==n?n:null==i?void 0:i.signal)&&void 0!==r?r:l.signal}),[null==i?void 0:i.signal,null==a?void 0:a.signal,l.signal]),f=(0,e.useCallback)((function(e){var t,n,r=function(e,t){if(t)return"function"==typeof t?t(e):t;if("string"==typeof e)return e;throw new Error("When using useOpenmrsSWR with a key that is not a string, you must provide a url() function that converts the key to a valid url. The key for this hook is ".concat(e,"."))}(e,u);return(0,F.openmrsFetch)(r,(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tr(e,t,n[t])}))}return e}({},a),n=null!=(n={signal:s})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t))}),[s,a,u]);return(0,ie.default)(t,f,c)}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){or(e,t,n[t])}))}return e}function ar(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}!function(e){e.loadPatient="loadPatient",e.newPatient="newPatient",e.loadError="patientLoadError"}(Jn||(Jn={}));var ur,cr={patientUuid:null,patient:null,isPendingUuid:!0,isLoadingPatient:!1,err:null};function lr(){var e=/\/patient\/([a-zA-Z0-9\-]+)\/?/.exec(location.pathname);return e&&e[1]}function sr(e,t){switch(t.type){case Jn.loadPatient:return ar(ir({},e),{patientUuid:t.patientUuid,patient:null,isPendingUuid:!1,isLoadingPatient:!0,err:null});case Jn.newPatient:return ar(ir({},e),{patient:t.patient,isPendingUuid:!1,isLoadingPatient:!1,err:null});case Jn.loadError:return ar(ir({},e),{patient:null,isPendingUuid:!1,isLoadingPatient:!1,err:t.err});default:return e}}function fr(t){var n,r,o=(n=(0,e.useReducer)(sr,ar(ir({},cr),{patientUuid:null!=t?t:null,isPendingUuid:!t,isLoadingPatient:!!t})),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rr(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(0,e.useEffect)((function(){if(i.isPendingUuid){var e=lr();a(e?{type:Jn.loadPatient,patientUuid:e}:{type:Jn.newPatient,patient:null})}var t=!0;return i.isLoadingPatient&&i.patientUuid&&(0,F.fetchCurrentPatient)(i.patientUuid).then((function(e){return t&&a({patient:e,type:Jn.newPatient})}),(function(e){return t&&a({err:e,type:Jn.loadError})})),function(){t=!1}}),[i.isPendingUuid,i.isLoadingPatient,i.patientUuid]),(0,e.useEffect)((function(){var e=function(e){var t=lr();t!=i.patientUuid&&a({type:Jn.loadPatient,patientUuid:t})};return window.addEventListener("single-spa:routing-event",e),function(){return window.removeEventListener("single-spa:routing-event",e)}}),[i.patientUuid]),{isLoading:i.isPendingUuid||i.isLoadingPatient,patient:i.patient,patientUuid:null!=t?t:i.patientUuid,error:i.err}}function dr(n){var r=M(n),o=r.extensions,i=r.extensionSlotModuleName;return n?o.map((function(r){return function(o){var a=o.state;return e.default.createElement(t.Provider,{value:{moduleName:i,featureName:"",extension:{extensionId:r.id,extensionSlotName:n,extensionSlotModuleName:i}}},e.default.createElement(l,{state:a}))}})):[]}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(){var t,n,r=(0,e.useRef)(),o=(t=(0,e.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],u=null;if(!i){if(ur){var c=(0,F.getSessionStore)().getState();c.loaded&&(u=c.session)}else ur=new Promise((function(e){var t=function(t){var n=t.loaded,o=t.session;n&&(e(o),u=o,r.current&&r.current(),r.current=void 0)};t((0,F.getSessionStore)().getState()),u||(r.current=(0,F.getSessionStore)().subscribe(t))}));if(!u)throw ur;a(u)}(0,e.useEffect)((function(){return r.current||(r.current=(0,F.getSessionStore)().subscribe((function(e){var t=e.loaded,n=e.session;t&&(u=n,a(n))}))),function(){r.current&&r.current(),r.current=void 0}}),[]);var l=i||u;if(!l)throw ur?(console.warn("useSession is in an unexpected state. Attempting to recover."),ur):Error("useSession is in an invalid state.");return l}var vr=v(688),mr=v(332),br=v.n(mr);function gr(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.defaultVisitCustomRepresentation,o=x((0,F.getVisitStore)()),i=o.patientUuid,a=o.manuallySetVisitUuid,u=t&&i==t?a:null,c="?patient=".concat(t,"&v=").concat(r,"&includeInactive=false"),l="/".concat(u,"?v=").concat(r),s=(0,ie.default)(t?"".concat(F.restBaseUrl,"/visit").concat(c):null,F.openmrsFetch),f=s.data,d=s.error,p=s.mutate,y=s.isValidating,v=(0,ie.default)(t&&u?"".concat(F.restBaseUrl,"/visit").concat(l):null,F.openmrsFetch),m=v.data,b=v.error,g=v.mutate,h=v.isValidating,w=(0,e.useMemo)((function(){return null!==(n=null==f?void 0:f.data.results.find((function(e){return null===e.stopDatetime})))&&void 0!==n?n:null}),[f]),O=(0,e.useMemo)((function(){return u?null==m?void 0:m.data:null!=w?w:null}),[m,w,u]);return{error:d||b,mutate:function(){p(),g()},isValidating:y||h,activeVisit:w,currentVisit:O,currentVisitIsRetrospective:Boolean(u),isLoading:Boolean((!f||u&&!m)&&(!d||!b))}}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wr(){var t,n,r=(t=(0,e.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return(0,e.useEffect)((function(){var e=(0,F.getVisitTypes)().subscribe((function(e){i(e)}),(function(e){return console.error(e)}));return function(){return e.unsubscribe()}}),[]),o}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vr.default.extend(br());var Sr=10;function jr(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr,i=(t=(0,e.useState)(1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1],c=(0,e.useMemo)((function(){return"number"==typeof o&&o>0?Math.max(1,Math.ceil(r.length/o)):1}),[r.length,o]),l=(0,e.useMemo)((function(){var e=(a-1)*o,t=(a+0)*o;return r.slice(e,t)}),[r,a,o]),s=(0,e.useCallback)((function(e){u(Math.max(1,Math.min(c,e)))}),[u,c]),f=(0,e.useCallback)((function(){a<c&&u(a+1)}),[a,c,u]),d=(0,e.useCallback)((function(){a>1&&u(a-1)}),[a,u]);return(0,e.useMemo)((function(){return{results:l,totalPages:c,currentPage:a,paginated:r.length>o,showNextButton:a<c,showPreviousButton:a>1,goTo:s,goToNext:f,goToPrevious:d}}),[l,c,r.length,o,a,s,f,d])}function Er(){var t="".concat(F.restBaseUrl,"/metadatamapping/termmapping?v=custom:(metadataUuid)&code=emr.primaryIdentifierType"),n=(0,ie.default)(t,F.openmrsFetch),r=n.data,o=n.error,i=n.isLoading;return(0,e.useMemo)((function(){var e,t;return{primaryIdentifierCode:null===(e=null==r||null===(t=r.data)||void 0===t?void 0:t.results[0])||void 0===e?void 0:e.metadataUuid,isLoading:i,error:o}}),[r,o,i])}var xr=v(374);const Pr=()=>{},_r=Pr(),Cr=Object,Ar=e=>e===_r,Rr=e=>"function"==typeof e,Ir=(e,t)=>({...e,...t}),kr=new WeakMap;let Tr=0;const Mr=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,i;if(Cr(e)!==e||r||n==RegExp)o=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=kr.get(e),o)return o;if(o=++Tr+"~",kr.set(e,o),n==Array){for(o="@",i=0;i<e.length;i++)o+=Mr(e[i])+",";kr.set(e,o)}if(n==Cr){o="#";const t=Cr.keys(e).sort();for(;!Ar(i=t.pop());)Ar(e[i])||(o+=i+":"+Mr(e[i])+",");kr.set(e,o)}}return o},Nr=new WeakMap,Ur={},Dr={},Lr="undefined",Fr=typeof window!=Lr,Vr=typeof document!=Lr,Br=(e,t)=>{const n=Nr.get(e);return[()=>!Ar(t)&&e.get(t)||Ur,r=>{if(!Ar(t)){const o=e.get(t);t in Dr||(Dr[t]=o),n[5](t,Ir(o,r),o||Ur)}},n[6],()=>!Ar(t)&&t in Dr?Dr[t]:!Ar(t)&&e.get(t)||Ur]};let zr=!0;const[$r,Wr]=Fr&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Pr,Pr],Gr={isOnline:()=>zr,isVisible:()=>{const e=Vr&&document.visibilityState;return Ar(e)||"hidden"!==e}},qr={initFocus:e=>(Vr&&document.addEventListener("visibilitychange",e),$r("focus",e),()=>{Vr&&document.removeEventListener("visibilitychange",e),Wr("focus",e)}),initReconnect:e=>{const t=()=>{zr=!0,e()},n=()=>{zr=!1};return $r("online",t),$r("offline",n),()=>{Wr("online",t),Wr("offline",n)}}},Hr=!e.default.useId,Kr=!Fr||"Deno"in window,Yr=e=>Fr&&typeof window.requestAnimationFrame!=Lr?window.requestAnimationFrame(e):setTimeout(e,1),Jr=Kr?e.useEffect:e.useLayoutEffect,Zr="undefined"!=typeof navigator&&navigator.connection,Qr=!Kr&&Zr&&(["slow-2g","2g"].includes(Zr.effectiveType)||Zr.saveData),Xr=e=>{if(Rr(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Mr(e):"",t]};let eo=0;const to=()=>++eo;async function no(...e){const[t,n,r,o]=e,i=Ir({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let a=i.populateCache;const u=i.rollbackOnError;let c=i.optimisticData;const l=i.throwOnError;if(Rr(n)){const e=n,r=[],o=t.keys();for(const n of o)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(s))}return s(n);async function s(n){const[o]=Xr(n);if(!o)return;const[s,f]=Br(t,o),[d,p,y,v]=Nr.get(t),m=()=>{const e=d[o];return(Rr(i.revalidate)?i.revalidate(s().data,n):!1!==i.revalidate)&&(delete y[o],delete v[o],e&&e[0])?e[0](2).then((()=>s().data)):s().data};if(e.length<3)return m();let b,g=r;const h=to();p[o]=[h,0];const w=!Ar(c),O=s(),S=O.data,j=O._c,E=Ar(j)?S:j;if(w&&(c=Rr(c)?c(E,S):c,f({data:c,_c:E})),Rr(g))try{g=g(E)}catch(e){b=e}if(g&&Rr(g.then)){if(g=await g.catch((e=>{b=e})),h!==p[o][0]){if(b)throw b;return g}b&&w&&(e=>"function"==typeof u?u(e):!1!==u)(b)&&(a=!0,f({data:E,_c:_r}))}if(a&&!b)if(Rr(a)){const e=a(g,E);f({data:e,error:_r,_c:_r})}else f({data:g,error:_r,_c:_r});if(p[o][1]=to(),Promise.resolve(m()).then((()=>{f({_c:_r})})),!b)return g;if(l)throw b}}const ro=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},oo=(e,t)=>{if(!Nr.has(e)){const n=Ir(qr,t),r={},o=no.bind(_r,e);let i=Pr;const a={},u=(e,t)=>{const n=a[e]||[];return a[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},c=(t,n,r)=>{e.set(t,n);const o=a[t];if(o)for(const e of o)e(n,r)},l=()=>{if(!Nr.has(e)&&(Nr.set(e,[r,{},{},{},o,c,u]),!Kr)){const t=n.initFocus(setTimeout.bind(_r,ro.bind(_r,r,0))),o=n.initReconnect(setTimeout.bind(_r,ro.bind(_r,r,1)));i=()=>{t&&t(),o&&o(),Nr.delete(e)}}};return l(),[e,o,l,i]}return[e,Nr.get(e)[4]]},[io,ao]=oo(new Map),uo=Ir({onLoadingSlow:Pr,onSuccess:Pr,onError:Pr,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,u=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!Ar(i)&&a>i||setTimeout(r,u,o)},onDiscarded:Pr,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Qr?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:Qr?5e3:3e3,compare:(e,t)=>Mr(e)==Mr(t),isPaused:()=>!1,cache:io,mutate:ao,fallback:{}},Gr),co=(e,t)=>{const n=Ir(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=Ir(o,a))}return n},lo=(0,e.createContext)({}),so=t=>{const{value:n}=t,r=(0,e.useContext)(lo),o=Rr(n),i=(0,e.useMemo)((()=>o?n(r):n),[o,r,n]),a=(0,e.useMemo)((()=>o?i:co(r,i)),[o,r,i]),u=i&&i.provider,c=(0,e.useRef)(_r);u&&!c.current&&(c.current=oo(u(a.cache||io),i));const l=c.current;return l&&(a.cache=l[0],a.mutate=l[1]),Jr((()=>{if(l)return l[2]&&l[2](),l[3]}),[]),(0,e.createElement)(lo.Provider,Ir(t,{value:a}))},fo="$inf$",po=Fr&&window.__SWR_DEVTOOLS_USE__,yo=po?window.__SWR_DEVTOOLS_USE__:[],vo=e=>Rr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],mo=yo.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=Xr(t),[,,,o]=Nr.get(io);if(r.startsWith(fo))return n(...e);const i=o[r];return Ar(i)?n(...e):(delete o[r],i)}),r))),bo=t=>function(...n){const r=Ir(uo,(0,e.useContext)(lo)),[o,i,a]=vo(n),u=co(r,a);let c=t;const{use:l}=u,s=(l||[]).concat(mo);for(let e=s.length;e--;)c=s[e](c);return c(o,i||u.fetcher||null,u)},go=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}},ho=(e,t)=>(...n)=>{const[r,o,i]=vo(n),a=(i.use||[]).concat(t);return e(r,o,{...i,use:a})};po&&(window.__SWR_DEVTOOLS_REACT__=e.default);const wo=e.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),Oo={dedupe:!0};Cr.defineProperty(so,"defaultValue",{value:uo});const So=bo(((t,n,r)=>{const{cache:o,compare:i,suspense:a,fallbackData:u,revalidateOnMount:c,revalidateIfStale:l,refreshInterval:s,refreshWhenHidden:f,refreshWhenOffline:d,keepPreviousData:p}=r,[y,v,m,b]=Nr.get(o),[g,h]=Xr(t),w=(0,e.useRef)(!1),O=(0,e.useRef)(!1),S=(0,e.useRef)(g),j=(0,e.useRef)(n),E=(0,e.useRef)(r),x=()=>E.current,P=()=>x().isVisible()&&x().isOnline(),[_,C,A,R]=Br(o,g),I=(0,e.useRef)({}).current,k=Ar(u)?r.fallback[g]:u,T=(e,t)=>{for(const n in I){const r=n;if("data"===r){if(!i(e[r],t[r])){if(!Ar(e[r]))return!1;if(!i(z,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},M=(0,e.useMemo)((()=>{const e=!!g&&!!n&&(Ar(c)?!x().isPaused()&&!a&&(!!Ar(l)||l):c),t=t=>{const n=Ir(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=_(),o=R(),i=t(r),u=r===o?i:t(o);let s=i;return[()=>{const e=t(_());return T(e,s)?(s.data=e.data,s.isLoading=e.isLoading,s.isValidating=e.isValidating,s.error=e.error,s):(s=e,e)},()=>u]}),[o,g]),N=(0,xr.useSyncExternalStore)((0,e.useCallback)((e=>A(g,((t,n)=>{T(n,t)||e()}))),[o,g]),M[0],M[1]),U=!w.current,D=y[g]&&y[g].length>0,L=N.data,F=Ar(L)?k:L,V=N.error,B=(0,e.useRef)(F),z=p?Ar(L)?B.current:L:F,$=!(D&&!Ar(V))&&(U&&!Ar(c)?c:!x().isPaused()&&(a?!Ar(F)&&l:Ar(F)||l)),W=!!(g&&n&&U&&$),G=Ar(N.isValidating)?W:N.isValidating,q=Ar(N.isLoading)?W:N.isLoading,H=(0,e.useCallback)((async e=>{const t=j.current;if(!g||!t||O.current||x().isPaused())return!1;let n,o,a=!0;const u=e||{},c=!m[g]||!u.dedupe,l=()=>Hr?!O.current&&g===S.current&&w.current:g===S.current,s={isValidating:!1,isLoading:!1},f=()=>{C(s)},d=()=>{const e=m[g];e&&e[1]===o&&delete m[g]},p={isValidating:!0};Ar(_().data)&&(p.isLoading=!0);try{if(c&&(C(p),r.loadingTimeout&&Ar(_().data)&&setTimeout((()=>{a&&l()&&x().onLoadingSlow(g,r)}),r.loadingTimeout),m[g]=[t(h),to()]),[n,o]=m[g],n=await n,c&&setTimeout(d,r.dedupingInterval),!m[g]||m[g][1]!==o)return c&&l()&&x().onDiscarded(g),!1;s.error=_r;const e=v[g];if(!Ar(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),c&&l()&&x().onDiscarded(g),!1;const u=_().data;s.data=i(u,n)?u:n,c&&l()&&x().onSuccess(n,g,r)}catch(e){d();const t=x(),{shouldRetryOnError:n}=t;t.isPaused()||(s.error=e,c&&l()&&(t.onError(e,g,t),(!0===n||Rr(n)&&n(e))&&(x().revalidateOnFocus&&x().revalidateOnReconnect&&!P()||t.onErrorRetry(e,g,t,(e=>{const t=y[g];t&&t[0]&&t[0](3,e)}),{retryCount:(u.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0}),[g,o]),K=(0,e.useCallback)(((...e)=>no(o,S.current,...e)),[]);if(Jr((()=>{j.current=n,E.current=r,Ar(L)||(B.current=L)})),Jr((()=>{if(!g)return;const e=H.bind(_r,Oo);let t=0;const n=go(g,y,((n,r={})=>{if(0==n){const n=Date.now();x().revalidateOnFocus&&n>t&&P()&&(t=n+x().focusThrottleInterval,e())}else if(1==n)x().revalidateOnReconnect&&P()&&e();else{if(2==n)return H();if(3==n)return H(r)}}));return O.current=!1,S.current=g,w.current=!0,C({_k:h}),$&&(Ar(F)||Kr?e():Yr(e)),()=>{O.current=!0,n()}}),[g]),Jr((()=>{let e;function t(){const t=Rr(s)?s(_().data):s;t&&-1!==e&&(e=setTimeout(n,t))}function n(){_().error||!f&&!x().isVisible()||!d&&!x().isOnline()?t():H(Oo).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[s,f,d,g]),(0,e.useDebugValue)(z),a&&Ar(F)&&g){if(!Hr&&Kr)throw new Error("Fallback data is required when using suspense in SSR.");j.current=n,E.current=r,O.current=!1;const e=b[g];if(!Ar(e)){const t=K(e);wo(t)}if(!Ar(V))throw V;{const e=H(Oo);Ar(z)||(e.status="fulfilled",e.value=!0),wo(e)}}return{mutate:K,get data(){return I.data=!0,z},get error(){return I.error=!0,V},get isValidating(){return I.isValidating=!0,G},get isLoading(){return I.isLoading=!0,q}}})),jo=ho(So,(e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r))));function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e,t){return Ro(e,t,Ao,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}var _o,Co,Ao={getPaginatedUrl:function(e,t,n){if(e){var r=new URL(e.toString());return r.searchParams.set("limit",""+t),r.searchParams.set("startIndex",""+n),r.searchParams.set("totalCount","true"),r.toString()}return null},getNextUrl:function(e){var t,n,r=null===(t=null==e||null===(n=e.links)||void 0===n?void 0:n.find((function(e){return"next"==e.rel})))||void 0===t?void 0:t.uri;if(r){var o=new URL(r);return o.host=window.location.host,o.protocol=window.location.protocol,o.toString()}return null},getTotalCount:function(e){return null!==(_o=null==e?void 0:e.totalCount)&&void 0!==_o?_o:Number.NaN},getCurrentPageSize:function(e){var t;return null!==(Co=null==e||null===(t=e.results)||void 0===t?void 0:t.length)&&void 0!==Co?Co:Number.NaN},getData:function(e){return null==e?void 0:e.results}};function Ro(t,n,r){var o,i,a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=r.getPaginatedUrl,l=r.getTotalCount,s=r.getCurrentPageSize,f=r.getData,d=u.immutable,p=u.swrConfig,y=null!==(o=u.fetcher)&&void 0!==o?o:F.openmrsFetch,v=(i=(0,e.useState)(1),a=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(i,a)||function(e,t){if(e){if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=v[0],b=v[1],g=(0,e.useRef)(Number.NaN),h=(0,e.useRef)(Number.NaN),w=n,O=(m-1)*n,S=(0,e.useMemo)((function(){return c(t,w,O)}),[t,w,O]),j=(d?jo:ie.default)(S,y,p),E=j.data,x=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(j,["data"]);(null==E?void 0:E.data)&&(g.current=l(null==E?void 0:E.data),h.current=s(null==E?void 0:E.data));var P=Math.ceil(g.current/n),_=(0,e.useCallback)((function(e){0<e&&e<=P?b(e):console.warn("Invalid attempt to go to out of bounds page: "+e)}),[t,m,P]),C=(0,e.useCallback)((function(){_(m+1)}),[t,m,P]),A=(0,e.useCallback)((function(){_(m-1)}),[t,m,P]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xo(e,t,n[t])}))}return e}({data:f(null==E?void 0:E.data),totalPages:P,totalCount:g.current,currentPage:m,currentPageSize:h,paginated:P>1,showNextButton:m<P,showPreviousButton:m>1,goTo:_,goToNext:C,goToPrevious:A},x)}function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ro(e,t,ko(),n)}function ko(){var e,t;return{getPaginatedUrl:function(e,t,n){if(e){var r=new URL((0,F.makeUrl)(e.toString()),window.location.toString());return r.searchParams.set("_count",""+t),r.searchParams.set("_getpagesoffset",""+n),r.toString()}return null},getNextUrl:function(e){var t,n,r=null===(t=null==e||null===(n=e.link)||void 0===n?void 0:n.find((function(e){return"next"==e.relation})))||void 0===t?void 0:t.url;if(r){var o=new URL(r);return o.host=window.location.host,o.protocol=window.location.protocol,o.toString()}return null},getTotalCount:function(t){return null!==(e=null==t?void 0:t.total)&&void 0!==e?e:Number.NaN},getCurrentPageSize:function(e){var n;return null!==(t=null==e||null===(n=e.entry)||void 0===n?void 0:n.length)&&void 0!==t?t:Number.NaN},getData:function(e){var t;return null==e||null===(t=e.entry)||void 0===t?void 0:t.map((function(e){return e.resource}))}}}const To=e.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),Mo={dedupe:!0};Cr.defineProperty(so,"defaultValue",{value:uo});const No=bo(((t,n,r)=>{const{cache:o,compare:i,suspense:a,fallbackData:u,revalidateOnMount:c,revalidateIfStale:l,refreshInterval:s,refreshWhenHidden:f,refreshWhenOffline:d,keepPreviousData:p}=r,[y,v,m,b]=Nr.get(o),[g,h]=Xr(t),w=(0,e.useRef)(!1),O=(0,e.useRef)(!1),S=(0,e.useRef)(g),j=(0,e.useRef)(n),E=(0,e.useRef)(r),x=()=>E.current,P=()=>x().isVisible()&&x().isOnline(),[_,C,A,R]=Br(o,g),I=(0,e.useRef)({}).current,k=Ar(u)?r.fallback[g]:u,T=(e,t)=>{for(const n in I){const r=n;if("data"===r){if(!i(e[r],t[r])){if(!Ar(e[r]))return!1;if(!i(z,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},M=(0,e.useMemo)((()=>{const e=!!g&&!!n&&(Ar(c)?!x().isPaused()&&!a&&(!!Ar(l)||l):c),t=t=>{const n=Ir(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=_(),o=R(),i=t(r),u=r===o?i:t(o);let s=i;return[()=>{const e=t(_());return T(e,s)?(s.data=e.data,s.isLoading=e.isLoading,s.isValidating=e.isValidating,s.error=e.error,s):(s=e,e)},()=>u]}),[o,g]),N=(0,xr.useSyncExternalStore)((0,e.useCallback)((e=>A(g,((t,n)=>{T(n,t)||e()}))),[o,g]),M[0],M[1]),U=!w.current,D=y[g]&&y[g].length>0,L=N.data,F=Ar(L)?k:L,V=N.error,B=(0,e.useRef)(F),z=p?Ar(L)?B.current:L:F,$=!(D&&!Ar(V))&&(U&&!Ar(c)?c:!x().isPaused()&&(a?!Ar(F)&&l:Ar(F)||l)),W=!!(g&&n&&U&&$),G=Ar(N.isValidating)?W:N.isValidating,q=Ar(N.isLoading)?W:N.isLoading,H=(0,e.useCallback)((async e=>{const t=j.current;if(!g||!t||O.current||x().isPaused())return!1;let n,o,a=!0;const u=e||{},c=!m[g]||!u.dedupe,l=()=>Hr?!O.current&&g===S.current&&w.current:g===S.current,s={isValidating:!1,isLoading:!1},f=()=>{C(s)},d=()=>{const e=m[g];e&&e[1]===o&&delete m[g]},p={isValidating:!0};Ar(_().data)&&(p.isLoading=!0);try{if(c&&(C(p),r.loadingTimeout&&Ar(_().data)&&setTimeout((()=>{a&&l()&&x().onLoadingSlow(g,r)}),r.loadingTimeout),m[g]=[t(h),to()]),[n,o]=m[g],n=await n,c&&setTimeout(d,r.dedupingInterval),!m[g]||m[g][1]!==o)return c&&l()&&x().onDiscarded(g),!1;s.error=_r;const e=v[g];if(!Ar(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),c&&l()&&x().onDiscarded(g),!1;const u=_().data;s.data=i(u,n)?u:n,c&&l()&&x().onSuccess(n,g,r)}catch(e){d();const t=x(),{shouldRetryOnError:n}=t;t.isPaused()||(s.error=e,c&&l()&&(t.onError(e,g,t),(!0===n||Rr(n)&&n(e))&&(x().revalidateOnFocus&&x().revalidateOnReconnect&&!P()||t.onErrorRetry(e,g,t,(e=>{const t=y[g];t&&t[0]&&t[0](3,e)}),{retryCount:(u.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0}),[g,o]),K=(0,e.useCallback)(((...e)=>no(o,S.current,...e)),[]);if(Jr((()=>{j.current=n,E.current=r,Ar(L)||(B.current=L)})),Jr((()=>{if(!g)return;const e=H.bind(_r,Mo);let t=0;const n=go(g,y,((n,r={})=>{if(0==n){const n=Date.now();x().revalidateOnFocus&&n>t&&P()&&(t=n+x().focusThrottleInterval,e())}else if(1==n)x().revalidateOnReconnect&&P()&&e();else{if(2==n)return H();if(3==n)return H(r)}}));return O.current=!1,S.current=g,w.current=!0,C({_k:h}),$&&(Ar(F)||Kr?e():Yr(e)),()=>{O.current=!0,n()}}),[g]),Jr((()=>{let e;function t(){const t=Rr(s)?s(_().data):s;t&&-1!==e&&(e=setTimeout(n,t))}function n(){_().error||!f&&!x().isVisible()||!d&&!x().isOnline()?t():H(Mo).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[s,f,d,g]),(0,e.useDebugValue)(z),a&&Ar(F)&&g){if(!Hr&&Kr)throw new Error("Fallback data is required when using suspense in SSR.");j.current=n,E.current=r,O.current=!1;const e=b[g];if(!Ar(e)){const t=K(e);To(t)}if(!Ar(V))throw V;{const e=H(Mo);Ar(z)||(e.status="fulfilled",e.value=!0),To(e)}}return{mutate:K,get data(){return I.data=!0,z},get error(){return I.error=!0,V},get isValidating(){return I.isValidating=!0,G},get isLoading(){return I.isLoading=!0,q}}})),Uo=Promise.resolve(),Do=ho(No,(t=>(n,r,o)=>{const i=(0,e.useRef)(!1),{cache:a,initialSize:u=1,revalidateAll:c=!1,persistSize:l=!1,revalidateFirstPage:s=!0,revalidateOnMount:f=!1,parallel:d=!1}=o,[,,,p]=Nr.get(io);let y;try{y=(e=>Xr(e?e(0,null):null)[0])(n),y&&(y=fo+y)}catch(e){}const[v,m,b]=Br(a,y),g=(0,e.useCallback)((()=>Ar(v()._l)?u:v()._l),[a,y,u]);(0,xr.useSyncExternalStore)((0,e.useCallback)((e=>y?b(y,(()=>{e()})):()=>{}),[a,y]),g,g);const h=(0,e.useCallback)((()=>{const e=v()._l;return Ar(e)?u:e}),[y,u]),w=(0,e.useRef)(h());Jr((()=>{i.current?y&&m({_l:l?w.current:h()}):i.current=!0}),[y,a]);const O=f&&!i.current,S=t(y,(async e=>{const t=v()._i,i=v()._r;m({_r});const u=[],l=h(),[f]=Br(a,e),y=f().data,b=[];let g=null;for(let e=0;e<l;++e){const[l,f]=Xr(n(e,d?null:g));if(!l)break;const[v,m]=Br(a,l);let h=v().data;const w=c||t||Ar(h)||s&&!e&&!Ar(y)||O||y&&!Ar(y[e])&&!o.compare(y[e],h);if(r&&("function"==typeof i?i(h,f):w)){const t=async()=>{if(l in p){const e=p[l];delete p[l],h=await e}else h=await r(f);m({data:h,_k:f}),u[e]=h};d?b.push(t):await t()}else u[e]=h;d||(g=h)}return d&&await Promise.all(b.map((e=>e()))),m({_i:_r}),u}),o),j=(0,e.useCallback)((function(e,t){const n="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return y?(r&&(Ar(e)?m({_i:!0,_r:n.revalidate}):m({_i:!1,_r:n.revalidate})),arguments.length?S.mutate(e,{...n,revalidate:r}):S.mutate()):Uo}),[y,a]),E=(0,e.useCallback)((e=>{if(!y)return Uo;const[,t]=Br(a,y);let r;if(Rr(e)?r=e(h()):"number"==typeof e&&(r=e),"number"!=typeof r)return Uo;t({_l:r}),w.current=r;const o=[],[i]=Br(a,y);let u=null;for(let e=0;e<r;++e){const[t]=Xr(n(e,u)),[r]=Br(a,t),c=t?r().data:_r;if(Ar(c))return j(i().data);o.push(c),u=c}return j(o)}),[y,a,j,h]);return{size:h(),setSize:E,mutate:j,get data(){return S.data},get error(){return S.error},get isValidating(){return S.isValidating},get isLoading(){return S.isLoading}}}));function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lo(e,t,n[t])}))}return e}function Vo(e){return Bo(e,Ao,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Bo(t,n){var r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.swrInfiniteConfig,u=i.immutable,c=n.getNextUrl,l=n.getTotalCount,s=n.getData,f=null!==(o=i.fetcher)&&void 0!==o?o:F.openmrsFetch,d=(0,e.useCallback)((function(e,r){return 0==e?t:n.getNextUrl(r.data)}),[t]),p=Do(d,f,Fo({},a,u?{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}:{})),y=p.data,v=(p.size,p.setSize),m=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(p,["data","size","setSize"]),b=null!=c(null==y?void 0:y[y.length-1].data),g=l(null==y||null===(r=y[0])||void 0===r?void 0:r.data);return Fo({data:null==y?void 0:y.flatMap((function(e){return s(e.data)})),totalCount:g,hasMore:b,loadMore:function(){var e;v((null!==(e=null==y?void 0:y.length)&&void 0!==e?e:0)+1)}},m)}function zo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Bo(e,ko(),t)}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wo(e){return Go(e,Ao,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Go(t,n){var r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Bo(t,n,i),u=a.hasMore,c=a.error,l=a.data,s=a.loadMore,f=a.isLoading;return(0,e.useEffect)((function(){u&&!c&&s()})),i.partialData?a:(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$o(e,t,n[t])}))}return e}({},a),o=null!=(o={data:u||c?void 0:l,isLoading:f||u})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})),r)}function qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Go(e,ko(),t)}})(),m})())}}}));
//# sourceMappingURL=openmrs-esm-react-utils.js.map