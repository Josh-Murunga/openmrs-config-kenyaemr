System.register(["@openmrs/esm-state"],(function(e,t){var r={};return{setters:[function(e){r.getGlobalStore=e.getGlobalStore}],execute:function(){e((()=>{"use strict";var e={685:e=>{e.exports=r}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{featureFlagsStore:()=>u,getFeatureFlag:()=>f,registerFeatureFlag:()=>c,setFeatureFlag:()=>b,subscribeToFeatureFlag:()=>s});var e=n(685);function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var i={flags:function(){var e={},t=!0,r=!1,n=void 0;try{for(var o,l=Object.keys(localStorage)[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;if(i.startsWith("openmrs:feature-flag:")){var u=i.replace("openmrs:feature-flag:",""),c=JSON.parse(localStorage.getItem("openmrs:feature-flag-meta:".concat(u))||"{}");e[u]=a({enabled:"true"===localStorage.getItem(i)},c)}}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e}()},u=(0,e.getGlobalStore)("feature-flags",i);function c(e,t,n){var o;u.setState((function(i){var u;return{flags:l(a({},i.flags),r({},e,{enabled:null!==(o=null===(u=i.flags[e])||void 0===u?void 0:u.enabled)&&void 0!==o&&o,label:t,description:n}))}}))}function f(e){return u.getState().flags[e].enabled}function s(e,t){u.subscribe((function(r){t(r.flags[e].enabled)}))}function b(e,t){u.setState((function(n){return{flags:l(a({},n.flags),r({},e,l(a({},n.flags[e]),{enabled:t})))}}))}u.subscribe((function(e){var r,n,o=!0,a=!1,l=void 0;try{for(var i,u=Object.entries(e.flags)[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var c=(r=i.value,n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw o}}return a}}(r,n)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=c[0],s=c[1];localStorage.setItem("openmrs:feature-flag:".concat(f),s.enabled.toString()),localStorage.setItem("openmrs:feature-flag-meta:".concat(f),JSON.stringify({label:s.label,description:s.description}))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}))})(),o})())}}}));
//# sourceMappingURL=openmrs-esm-feature-flags.js.map